{"ast":null,"code":"var _jsxFileName = \"/Users/cyfi/Downloads/splunk-sdk-javascript-create-react-app/examples/browser/create-splunk-react-app/src/SplunkJsExample.js\";\nimport React from 'react';\nimport './SplunkJsExample.css';\nimport Inputs from './Inputs';\nimport * as splunkjs from 'splunk-sdk'; // jquery.ajax is used for the underlying http client in ProxyHttp\n\nwindow.$ = require('jquery'); //const splunkjs = require('splunk-sdk');\n\nconst Async = splunkjs.Async;\n\nconst clientHttp = require('splunk-sdk/lib/platform/client/proxy_http');\n\nclass SplunkJsExample extends React.Component {\n  constructor(props) {\n    super(props); // We define handlers here as well as Inputs.js in order to lift\n    // the username and password states up so that they can be used\n    // here to run and populate search results.\n    // More info on lifting state: https://reactjs.org/docs/lifting-state-up.html\n\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.state = {\n      username: 'admin',\n      password: 'changeme',\n      query: 'search index=_internal | head 3',\n      results: []\n    };\n  }\n\n  handleUsernameChange(username) {\n    this.setState({\n      username: username\n    });\n  }\n\n  handlePasswordChange(password) {\n    this.setState({\n      password: password\n    });\n  }\n\n  handleQueryChange(query) {\n    this.setState({\n      query: query\n    });\n  }\n\n  handleSearch() {\n    var http = new clientHttp.ProxyHttp('/proxy');\n    var service = new splunkjs.Service(http, {\n      username: this.state.username,\n      password: this.state.password,\n      scheme: 'https',\n      // we have configured this example for HTTPS\n      host: 'localhost',\n      // this is the host for our http-proxy-middleware server, do not change\n      port: '3000' // this is the port for our http-proxy-middleware server, do not change\n\n    });\n    var that = this;\n    Async.chain([// First, we log in\n    function (done) {\n      service.login(done);\n    }, // Perform the search\n    function (success, done) {\n      if (!success) {\n        done('Error logging in');\n      }\n\n      service.search(`${that.state.query}`, {}, done);\n    }, // Wait until the job is done\n    function (job, done) {\n      job.track({}, function (job) {\n        // Ask the server for the results\n        job.results({}, done);\n      });\n    }, // Print out the statistics and get the results\n    function (results, job, done) {\n      // Print out the statistics to the console\n      console.log('Splunk Search Job Statistics:');\n      console.log(`  Event Count: ${job.properties().eventCount}`);\n      console.log(`  Disk Usage: ${job.properties().diskUsage} bytes`);\n      console.log(`  Priority: ${job.properties().priority}`);\n      console.log(results);\n      that.setState({\n        results: results\n      });\n    }], function (err) {\n      console.error(err);\n    });\n  }\n\n  render() {\n    const results = this.state.results; // Find the index of the fields we want\n\n    const timeIndex = (results.fields || []).indexOf('_time');\n    const sourceIndex = (results.fields || []).indexOf('source');\n    const sourcetypeIndex = (results.fields || []).indexOf('sourcetype');\n    const rawIndex = (results.fields || []).indexOf('_raw');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SplunkExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Inputs, {\n      username: this.state.username,\n      password: this.state.password,\n      query: this.state.query,\n      onUsernameChange: this.handleUsernameChange,\n      onPasswordChange: this.handlePasswordChange,\n      onQueryChange: this.handleQueryChange,\n      onClickSearch: this.handleSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, \"Results\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"Results\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, \"_time\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 39\n      }\n    }, \"source\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 54\n      }\n    }, \"sourcetype\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 73\n      }\n    }, \"_raw\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, (results.rows || []).map((result, i) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: i.toString(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 32\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 55\n        }\n      }, result[timeIndex]), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 83\n        }\n      }, result[sourceIndex]), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 113\n        }\n      }, result[sourcetypeIndex]), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 147\n        }\n      }, result[rawIndex]));\n    }), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nexport default SplunkJsExample;","map":{"version":3,"sources":["/Users/cyfi/Downloads/splunk-sdk-javascript-create-react-app/examples/browser/create-splunk-react-app/src/SplunkJsExample.js"],"names":["React","Inputs","splunkjs","window","$","require","Async","clientHttp","SplunkJsExample","Component","constructor","props","handleUsernameChange","bind","handlePasswordChange","handleQueryChange","handleSearch","state","username","password","query","results","setState","http","ProxyHttp","service","Service","scheme","host","port","that","chain","done","login","success","search","job","track","console","log","properties","eventCount","diskUsage","priority","err","error","render","timeIndex","fields","indexOf","sourceIndex","sourcetypeIndex","rawIndex","rows","map","result","i","toString"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './SplunkJsExample.css';\nimport Inputs from './Inputs';\nimport * as splunkjs from 'splunk-sdk';\n\n// jquery.ajax is used for the underlying http client in ProxyHttp\nwindow.$ = require('jquery');\n\n//const splunkjs = require('splunk-sdk');\nconst Async  = splunkjs.Async;\nconst clientHttp = require('splunk-sdk/lib/platform/client/proxy_http');\n\nclass SplunkJsExample extends React.Component {\n    constructor(props) {\n      super(props);\n      // We define handlers here as well as Inputs.js in order to lift\n      // the username and password states up so that they can be used\n      // here to run and populate search results.\n      // More info on lifting state: https://reactjs.org/docs/lifting-state-up.html\n      this.handleUsernameChange = this.handleUsernameChange.bind(this);\n      this.handlePasswordChange = this.handlePasswordChange.bind(this);\n      this.handleQueryChange = this.handleQueryChange.bind(this);\n      this.handleSearch = this.handleSearch.bind(this);\n      this.state = {\n          username: 'admin',\n          password: 'changeme',\n          query: 'search index=_internal | head 3',\n          results: [],\n      };\n    }\n  \n    handleUsernameChange(username) {\n        this.setState({username: username});\n    }\n\n    handlePasswordChange(password) {\n        this.setState({password: password});\n    }\n\n    handleQueryChange(query) {\n        this.setState({query: query});\n    }\n\n    handleSearch() {\n        var http = new clientHttp.ProxyHttp('/proxy');\n        var service = new splunkjs.Service(http, {\n            username: this.state.username,\n            password: this.state.password,\n            scheme: 'https', // we have configured this example for HTTPS\n            host: 'localhost', // this is the host for our http-proxy-middleware server, do not change\n            port: '3000' // this is the port for our http-proxy-middleware server, do not change\n        });\n\n        var that = this;\n        Async.chain([\n        // First, we log in\n        function(done) {\n            service.login(done);\n        },\n        // Perform the search\n        function(success, done) {\n            if (!success) {\n                done('Error logging in');\n            }\n            \n            service.search(`${that.state.query}`, {}, done);\n        },\n        // Wait until the job is done\n        function(job, done) {\n            job.track({}, function(job) {\n                // Ask the server for the results\n                job.results({}, done);\n            });\n        },\n        // Print out the statistics and get the results\n        function(results, job, done) {\n            // Print out the statistics to the console\n            console.log('Splunk Search Job Statistics:');\n            console.log(`  Event Count: ${job.properties().eventCount}`);\n            console.log(`  Disk Usage: ${job.properties().diskUsage} bytes`);\n            console.log(`  Priority: ${job.properties().priority}`);\n            console.log(results);\n            that.setState({results: results});\n        }],\n        function(err) {\n            console.error(err);        \n        }\n        );\n    }\n  \n    render() {\n      const results = this.state.results;\n\n      // Find the index of the fields we want\n      const timeIndex = (results.fields || []).indexOf('_time');\n      const sourceIndex = (results.fields || []).indexOf('source');\n      const sourcetypeIndex = (results.fields || []).indexOf('sourcetype');\n      const rawIndex = (results.fields || []).indexOf('_raw');\n      \n      return (\n        <div className='SplunkExample'>\n            <Inputs\n                username={this.state.username}\n                password={this.state.password}\n                query={this.state.query}\n                onUsernameChange={this.handleUsernameChange} \n                onPasswordChange={this.handlePasswordChange}\n                onQueryChange={this.handleQueryChange}\n                onClickSearch={this.handleSearch} />\n            \n            <h3>Results</h3>\n            <table className='Results'>\n                <thead>\n                    <tr><th>_time</th><th>source</th><th>sourcetype</th><th>_raw</th></tr>\n                </thead>\n                <tbody>\n                    {(results.rows || []).map((result, i) => {\n                        return <tr key={i.toString()}><td>{result[timeIndex]}</td><td>{result[sourceIndex]}</td><td>{result[sourcetypeIndex]}</td><td>{result[rawIndex]}</td></tr>;\n                    })}\n                    <tr></tr>\n                </tbody>\n            </table>\n        </div>\n        );\n    }\n  }\n\n  export default SplunkJsExample;"]},"metadata":{},"sourceType":"module"}